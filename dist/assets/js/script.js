const api_url="https://www.flickr.com/services/rest/?method=flickr.groups.pools.getPhotos&api_key=76c025377a81ea0aa43cd16636f73ede&group_id=96697731%40N00&format=json&nojsoncallback=1";let currentSlide=null,currentPageNo,totalPageNo,isSlideLeft=!1,pageLoader=document.getElementById("loading");async function getapi(e,t,i){const n=await fetch(e+"&"+new URLSearchParams({per_page:20,page:i}));e=await n.json();currentPageNo=e.photos.page,totalPageNo=e.photos.pages,("gridview"===t?show:showslider)(e.photos,e.photos.photo)}function showLoader(){pageLoader.style.display="block"}function hideloader(){pageLoader.style.display="none"}function show(i,e){showLoader();let n="";e.forEach(function(e,t){n+=`
            <li class="img-cover">
                <a class="img-link" onclick="openSlider(event,${e.id}, ${i.page})" href="#">
                    <img src="https://live.staticflickr.com/${e.server}/${e.id}_${e.secret}_m.jpg"/>
                </a>
                <a class="dlbtn" onclick="downloadImg('https://live.staticflickr.com/${e.server}/${e.id}_${e.secret}_z.jpg', '${e.id}_${e.secret}.jpg');" href="javascript:;"><span>Download Original</span></a>
            </li>
        `}),document.getElementById("flickrphotogallery").innerHTML=n,document.querySelector(".currentpage").innerHTML=i.page,document.querySelector(".totalpages").innerHTML=i.pages,1<currentPageNo&&currentPageNo<totalPageNo&&(enablePrevBtn(),enableNextBtn()),1==currentPageNo&&(disablePrevBtn(),enableNextBtn()),currentPageNo==totalPageNo&&(disableNextBtn(),enablePrevBtn()),hideloader(),hideSlideView()}function downloadImg(e,n){let t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="blob",t.onload=function(){let e=window.URL||window.webkitURL;var t=e.createObjectURL(this.response);let i=document.createElement("a");i.href=t,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)},t.send()}function openSlider(e,t,i){e.preventDefault(),currentSlide=t,getapi(api_url,"gallery",i)}getapi(api_url,"gridview",1);let button=document.querySelector(".slideviewbtn"),box=document.querySelector(".gridviewbtn"),gridview=document.querySelector(".grid-view-cnt"),slideview=document.querySelector(".slide-view-cnt");function hideSlideView(){box.classList.add("hide"),slideview.classList.add("hide"),button.classList.remove("hide"),gridview.classList.remove("hide")}function hideGridView(){gridview.classList.add("hide"),button.classList.add("hide"),box.classList.remove("hide"),slideview.classList.remove("hide")}function showslider(i,e){let n="",a=20*(i.page-1)+1,t=(document.getElementById("slider").innerHTML="",e.forEach(function(e,t){n+=`
            <div class="slide" id="id_${e.id}">
                <img src="https://live.staticflickr.com/${e.server}/${e.id}_${e.secret}_z.jpg"/>
                <div class="slide-content">
                    <div class="leftDetails">
                        <span class="imgTitle">"${e.title}"</span>
                        <span class="by">by </span><span class="ownerName">"${e.ownername}"</span>
                    </div>
                    <div class="rightDetails">
                        <span class="currentItems">${a++}</span> of <span class="totalItems">${i.total}</span>
                        <a class="dlbtn" onclick="downloadImg('https://live.staticflickr.com/${e.server}/${e.id}_${e.secret}_z.jpg', '${e.id}_${e.secret}.jpg');" href="javascript:;"><span>Download Original</span></a>
                    </div>
                </div>
            </div>
        `}),document.getElementById("slider").innerHTML=n,document.querySelectorAll(".slide"));if(null!==currentSlide){const l=document.getElementById("id_"+currentSlide);l.classList.add("active")}else{e=isSlideLeft?19:0;t[e].classList.add("active")}hideloader(),hideGridView()}function slideLeft(){isSlideLeft=!0,currentSlide=document.querySelector(".slide.active").getAttribute("id").split("_")[1];const e=document.getElementById("id_"+currentSlide);null!==e.previousElementSibling?(e.classList.remove("active"),e.previousElementSibling.classList.add("active"),currentSlide=parseInt(e.previousElementSibling.getAttribute("id").split("_")[1])):(currentSlide=null,1<currentPageNo&&getapi(api_url,"gallery",currentPageNo-1))}function slideRight(){isSlideLeft=!1,currentSlide=document.querySelector(".slide.active").getAttribute("id").split("_")[1];const e=document.getElementById("id_"+currentSlide);null!==e.nextElementSibling?(e.classList.remove("active"),e.nextElementSibling.classList.add("active"),currentSlide=parseInt(e.nextElementSibling.getAttribute("id").split("_")[1])):(currentSlide=null,currentPageNo<totalPageNo&&getapi(api_url,"gallery",currentPageNo+1))}function getInputValue(){var e=document.getElementById("pagination").value;return!(e<1||e>totalPageNo)&&(e!=currentPageNo&&(page=e,void getapi(api_url,"gridview",page)))}function nextPage(){page=++currentPageNo,getapi(api_url,"gridview",page)}function prevPage(){page=--currentPageNo,getapi(api_url,"gridview",page)}function disablePrevBtn(){document.getElementById("prevPage").disabled=!0}function enablePrevBtn(){document.getElementById("prevPage").disabled=!1}function disableNextBtn(){document.getElementById("nextPage").disabled=!0}function enableNextBtn(){document.getElementById("nextPage").disabled=!1}button.addEventListener("click",function(){getapi(api_url,"gallery",currentPageNo)}),box.addEventListener("click",function(){getapi(api_url,"gridview",currentPageNo)});